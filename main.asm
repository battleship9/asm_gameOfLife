bits 64
global _start

section .data
errorMsg: db "Error!"
errorMsgLen: equ $ - errorMsg
; grid: db '.X..............................X...........................XXX............................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................XXX......................................................................................'
; nextGrid: times rows * cols db '.'

section .bss
tmp: resb 1

section .text
%include "gameOfLifeCore.asm"

_start:
    call play

    jmp exit

play:
    times 30 call computeNextGen
    ; call computeNextGen
    ; jmp play
    ret

error:
    mov rax, 4
    mov rbx, 1
    mov rcx, errorMsg
    mov rdx, errorMsgLen
    int 80h

exit:
    mov rax, 1
    int 80h